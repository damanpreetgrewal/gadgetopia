{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/daman/Desktop/Final Project/gadgetopia/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/daman/Desktop/Final Project/gadgetopia/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/daman/Desktop/Final Project/gadgetopia/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{Form,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import FormContainer from'../components/FormContainer';import Message from'../components/Message';import Loader from'../components/Loader';import{listProductsDetails,updateProduct}from'../actions/productActions';import{Link}from'react-router-dom';import{PRODUCT_UPDATE_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditProductScreen=function EditProductScreen(_ref){var match=_ref.match,history=_ref.history;var productId=match.params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),brand=_useState8[0],setBrand=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),countInStock=_useState12[0],setCountInStock=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),description=_useState14[0],setDescription=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),rating=_useState16[0],setRating=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),uploading=_useState18[0],setUploading=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),uploadError=_useState20[0],setUploadError=_useState20[1];var dispatch=useDispatch();var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;var productUpdate=useSelector(function(state){return state.productUpdate;});var loadingUpdate=productUpdate.loading,errorUpdate=productUpdate.error,successUpdate=productUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:PRODUCT_UPDATE_RESET});history.push('/admin/productlist');}else{if(!product.name||product._id!==productId){dispatch(listProductsDetails(productId));}else{setName(product.name);setPrice(product.price);setImage(product.image);setBrand(product.brand);setCategory(product.category);setCountInStock(product.countInStock);setDescription(product.description);setRating(product.rating);}}},[product,dispatch,productId,history,successUpdate]);var uploadFileHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,formData,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];formData=new FormData();formData.append('image',file);setUploading(true);console.log(uploading);_context.prev=5;config={headers:{'Content-Type':'multipart/form-data'}};_context.next=9;return axios.post('/api/upload',formData,config);case 9:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setImage(data);console.log(uploading);setUploading(false);setUploadError(false);_context.next=22;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](5);setUploadError(true);console.log(_context.t0);setUploading(false);case 22:case\"end\":return _context.stop();}}},_callee,null,[[5,17]]);}));return function uploadFileHandler(_x){return _ref2.apply(this,arguments);};}();var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateProduct({_id:productId,name:name,price:price,image:image,brand:brand,category:category,description:description,countInStock:countInStock,rating:rating}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin/productlist\",className:\"btn btn-outline-dark my-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-hand-point-left\"}),\" Go Back\"]}),/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Product\"}),successUpdate&&/*#__PURE__*/_jsxs(Message,{variant:\"success\",children:[\"Product Updated successfuly\",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\"})]}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),errorUpdate&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[errorUpdate,\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle\"}),\" \"]}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[error,\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle\"})]}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Product Name\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"name\",placeholder:\"Enter your full name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"price\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Price \"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"number\",placeholder:\"Enter price\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"image\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Image \"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"Enter image url\",value:image,onChange:function onChange(e){return setImage(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form.File,{id:\"image-file\",label:uploading===false&&/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle\"}),\" Only jpg/jpeg/png Files \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle\"})]}),custom:true,onChange:uploadFileHandler}),uploading&&/*#__PURE__*/_jsx(Loader,{}),uploadError&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\"Sorry \",/*#__PURE__*/_jsx(\"i\",{className:\"far fa-sad-tear\"}),\" , the file has to be a jpg/jpeg/png \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bomb\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"brand\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Brand \"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"Enter brand\",value:brand,onChange:function onChange(e){return setBrand(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"countInStock\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" countInStock \"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"number\",placeholder:\"Enter countInStock\",value:countInStock,onChange:function onChange(e){return setCountInStock(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"category\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Category \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,placeholder:\"Enter category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"description\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Description \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,placeholder:\"Enter description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"primary\",children:[\"Update  \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-edit\"})]})]})]})]});};export default EditProductScreen;","map":{"version":3,"sources":["C:/Users/daman/Desktop/Final Project/gadgetopia/frontend/src/screens/EditProductScreen.js"],"names":["React","useState","useEffect","axios","Form","Button","useDispatch","useSelector","FormContainer","Message","Loader","listProductsDetails","updateProduct","Link","PRODUCT_UPDATE_RESET","EditProductScreen","match","history","productId","params","id","name","setName","price","setPrice","image","setImage","brand","setBrand","category","setCategory","countInStock","setCountInStock","description","setDescription","rating","setRating","uploading","setUploading","uploadError","setUploadError","dispatch","productDetails","state","loading","error","product","productUpdate","loadingUpdate","errorUpdate","successUpdate","success","type","push","_id","uploadFileHandler","e","file","target","files","formData","FormData","append","console","log","config","headers","post","data","submitHandler","preventDefault","value"],"mappings":"0gBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,MAAf,KAA6B,iBAA7B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OAASC,mBAAT,CAA8BC,aAA9B,KAAmD,2BAAnD,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,oBAAT,KAAqC,+BAArC,C,6IAGA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,MAAwB,IAArBC,CAAAA,KAAqB,MAArBA,KAAqB,CAAdC,OAAc,MAAdA,OAAc,CAC9C,GAAMC,CAAAA,SAAS,CAAGF,KAAK,CAACG,MAAN,CAAaC,EAA/B,CACA,cAAwBnB,QAAQ,CAAC,EAAD,CAAhC,wCAAOoB,IAAP,eAAaC,OAAb,eACA,eAA0BrB,QAAQ,CAAC,CAAD,CAAlC,yCAAOsB,KAAP,eAAcC,QAAd,eACA,eAA0BvB,QAAQ,CAAC,EAAD,CAAlC,yCAAOwB,KAAP,eAAcC,QAAd,eACA,eAA0BzB,QAAQ,CAAC,EAAD,CAAlC,yCAAO0B,KAAP,eAAcC,QAAd,eACA,eAAgC3B,QAAQ,CAAC,EAAD,CAAxC,0CAAO4B,QAAP,gBAAiBC,WAAjB,gBACA,gBAAwC7B,QAAQ,CAAC,CAAD,CAAhD,2CAAO8B,YAAP,gBAAqBC,eAArB,gBACA,gBAAsC/B,QAAQ,CAAC,EAAD,CAA9C,2CAAOgC,WAAP,gBAAoBC,cAApB,gBACA,gBAA4BjC,QAAQ,CAAC,EAAD,CAApC,2CAAOkC,MAAP,gBAAeC,SAAf,gBACA,gBAAkCnC,QAAQ,CAAC,KAAD,CAA1C,2CAAOoC,SAAP,gBAAkBC,YAAlB,gBACA,gBAAsCrC,QAAQ,CAAC,KAAD,CAA9C,2CAAOsC,WAAP,gBAAoBC,cAApB,gBAIA,GAAMC,CAAAA,QAAQ,CAAGnC,WAAW,EAA5B,CAEA,GAAMoC,CAAAA,cAAc,CAAGnC,WAAW,CAAC,SAAAoC,KAAK,QAAIA,CAAAA,KAAK,CAACD,cAAV,EAAN,CAAlC,CACA,GAAQE,CAAAA,OAAR,CAAoCF,cAApC,CAAQE,OAAR,CAAiBC,KAAjB,CAAoCH,cAApC,CAAiBG,KAAjB,CAAwBC,OAAxB,CAAoCJ,cAApC,CAAwBI,OAAxB,CAEA,GAAMC,CAAAA,aAAa,CAAGxC,WAAW,CAAC,SAAAoC,KAAK,QAAIA,CAAAA,KAAK,CAACI,aAAV,EAAN,CAAjC,CACA,GAAiBC,CAAAA,aAAjB,CAA+ED,aAA/E,CAAQH,OAAR,CAAuCK,WAAvC,CAA+EF,aAA/E,CAAgCF,KAAhC,CAA6DK,aAA7D,CAA+EH,aAA/E,CAAoDI,OAApD,CAEAjD,SAAS,CAAC,UAAM,CACZ,GAAIgD,aAAJ,CAAmB,CACfT,QAAQ,CAAC,CACLW,IAAI,CAAEtC,oBADD,CAAD,CAAR,CAGAG,OAAO,CAACoC,IAAR,CAAa,oBAAb,EACH,CALD,IAKO,CACH,GAAI,CAACP,OAAO,CAACzB,IAAT,EAAiByB,OAAO,CAACQ,GAAR,GAAgBpC,SAArC,CAAgD,CAC5CuB,QAAQ,CAAC9B,mBAAmB,CAACO,SAAD,CAApB,CAAR,CACH,CAFD,IAEO,CACHI,OAAO,CAACwB,OAAO,CAACzB,IAAT,CAAP,CACAG,QAAQ,CAACsB,OAAO,CAACvB,KAAT,CAAR,CACAG,QAAQ,CAACoB,OAAO,CAACrB,KAAT,CAAR,CACAG,QAAQ,CAACkB,OAAO,CAACnB,KAAT,CAAR,CACAG,WAAW,CAACgB,OAAO,CAACjB,QAAT,CAAX,CACAG,eAAe,CAACc,OAAO,CAACf,YAAT,CAAf,CACAG,cAAc,CAACY,OAAO,CAACb,WAAT,CAAd,CACAG,SAAS,CAACU,OAAO,CAACX,MAAT,CAAT,CACH,CACJ,CACJ,CApBQ,CAoBN,CAACW,OAAD,CAAUL,QAAV,CAAoBvB,SAApB,CAA+BD,OAA/B,CAAwCiC,aAAxC,CApBM,CAAT,CAsBA,GAAMK,CAAAA,iBAAiB,2FAAG,iBAAOC,CAAP,kKAChBC,IADgB,CACTD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CADS,CAEhBC,QAFgB,CAEL,GAAIC,CAAAA,QAAJ,EAFK,CAGtBD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBL,IAAzB,EACAnB,YAAY,CAAC,IAAD,CAAZ,CACAyB,OAAO,CAACC,GAAR,CAAY3B,SAAZ,EALsB,gBAQZ4B,MARY,CAQH,CACXC,OAAO,CAAE,CACL,eAAgB,qBADX,CADE,CARG,uBAcK/D,CAAAA,KAAK,CAACgE,IAAN,CAAW,aAAX,CAA0BP,QAA1B,CAAoCK,MAApC,CAdL,wCAcVG,IAdU,mBAcVA,IAdU,CAgBlB1C,QAAQ,CAAC0C,IAAD,CAAR,CACAL,OAAO,CAACC,GAAR,CAAY3B,SAAZ,EACAC,YAAY,CAAC,KAAD,CAAZ,CACAE,cAAc,CAAC,KAAD,CAAd,CAnBkB,iFAqBlBA,cAAc,CAAC,IAAD,CAAd,CACAuB,OAAO,CAACC,GAAR,cACA1B,YAAY,CAAC,KAAD,CAAZ,CAvBkB,qEAAH,kBAAjBiB,CAAAA,iBAAiB,6CAAvB,CA2BA,GAAMc,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACb,CAAD,CAAO,CACzBA,CAAC,CAACc,cAAF,GACA7B,QAAQ,CAAC7B,aAAa,CAAC,CACnB0C,GAAG,CAAEpC,SADc,CAEnBG,IAAI,CAAJA,IAFmB,CAGnBE,KAAK,CAALA,KAHmB,CAInBE,KAAK,CAALA,KAJmB,CAKnBE,KAAK,CAALA,KALmB,CAMnBE,QAAQ,CAARA,QANmB,CAOnBI,WAAW,CAAXA,WAPmB,CAQnBF,YAAY,CAAZA,YARmB,CASnBI,MAAM,CAANA,MATmB,CAAD,CAAd,CAAR,CAWH,CAbD,CAcA,mBACI,wCACI,MAAC,IAAD,EAAM,EAAE,CAAC,oBAAT,CAA8B,SAAS,CAAC,2BAAxC,wBAAoE,UAAG,SAAS,CAAC,wBAAb,EAApE,cADJ,cAEI,MAAC,aAAD,yBACI,oCADJ,CAEKe,aAAa,eAAI,MAAC,OAAD,EAAS,OAAO,CAAC,SAAjB,sDAAsD,UAAG,SAAS,CAAC,cAAb,EAAtD,GAFtB,CAGKF,aAAa,eAAI,KAAC,MAAD,IAHtB,CAIKC,WAAW,eAAI,MAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,WAA2BA,WAA3B,kBAAwC,UAAG,SAAS,CAAC,6BAAb,EAAxC,OAJpB,CAKKL,OAAO,cAAG,KAAC,MAAD,IAAH,CAAgBC,KAAK,cAAG,MAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,WAA2BA,KAA3B,kBAAkC,UAAG,SAAS,CAAC,6BAAb,EAAlC,GAAH,cACzB,MAAC,IAAD,EAAM,QAAQ,CAAEwB,aAAhB,wBAEI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,4BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,QAAQ,KAAtB,CAAuB,IAAI,CAAC,MAA5B,CAAmC,WAAW,CAAC,sBAA/C,CAAsE,KAAK,CAAEhD,IAA7E,CAAmF,QAAQ,CAAE,kBAAAmC,CAAC,QAAIlC,CAAAA,OAAO,CAACkC,CAAC,CAACE,MAAF,CAASa,KAAV,CAAX,EAA9F,EAFJ,GAFJ,cAMiB,aANjB,cAQI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,OAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,sBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,QAAQ,KAAtB,CAAuB,IAAI,CAAC,QAA5B,CAAqC,WAAW,CAAC,aAAjD,CAA+D,KAAK,CAAEhD,KAAtE,CAA6E,QAAQ,CAAE,kBAAAiC,CAAC,QAAIhC,CAAAA,QAAQ,CAACgC,CAAC,CAACE,MAAF,CAASa,KAAV,CAAZ,EAAxF,EAFJ,GARJ,cAYiB,aAZjB,cAcI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,OAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,sBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,QAAQ,KAAtB,CAAuB,IAAI,CAAC,MAA5B,CAAmC,WAAW,CAAC,iBAA/C,CAAiE,KAAK,CAAE9C,KAAxE,CAA+E,QAAQ,CAAE,kBAAA+B,CAAC,QAAI9B,CAAAA,QAAQ,CAAC8B,CAAC,CAACE,MAAF,CAASa,KAAV,CAAZ,EAA1F,EAFJ,cAGoB,aAHpB,cAII,KAAC,IAAD,CAAM,IAAN,EAAW,EAAE,CAAC,YAAd,CAA2B,KAAK,CAAElC,SAAS,GAAK,KAAd,eAAuB,MAAC,OAAD,EAAS,OAAO,CAAC,MAAjB,wBAAwB,UAAG,SAAS,CAAC,2BAAb,EAAxB,0CAA8F,UAAG,SAAS,CAAC,2BAAb,EAA9F,GAAzD,CAAgN,MAAM,KAAtN,CAAuN,QAAQ,CAAEkB,iBAAjO,EAJJ,CAKKlB,SAAS,eAAI,KAAC,MAAD,IALlB,CAMKE,WAAW,eAAI,MAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,iCAAgC,UAAG,SAAS,CAAC,iBAAb,EAAhC,sDAAwG,UAAG,SAAS,CAAC,aAAb,EAAxG,GANpB,GAdJ,cAqBiB,aArBjB,cAuBI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,OAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,sBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,QAAQ,KAAtB,CAAuB,IAAI,CAAC,MAA5B,CAAmC,WAAW,CAAC,aAA/C,CAA6D,KAAK,CAAEZ,KAApE,CAA2E,QAAQ,CAAE,kBAAA6B,CAAC,QAAI5B,CAAAA,QAAQ,CAAC4B,CAAC,CAACE,MAAF,CAASa,KAAV,CAAZ,EAAtF,EAFJ,GAvBJ,cA2BiB,aA3BjB,cA6BI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,cAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,6BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,QAAQ,KAAtB,CAAuB,IAAI,CAAC,QAA5B,CAAqC,WAAW,CAAC,oBAAjD,CAAsE,KAAK,CAAExC,YAA7E,CAA2F,QAAQ,CAAE,kBAAAyB,CAAC,QAAIxB,CAAAA,eAAe,CAACwB,CAAC,CAACE,MAAF,CAASa,KAAV,CAAnB,EAAtG,EAFJ,GA7BJ,cAiCiB,aAjCjB,cAmCI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,UAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,yBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,QAAQ,KAAlC,CAAmC,WAAW,CAAC,gBAA/C,CAAgE,KAAK,CAAE1C,QAAvE,CAAiF,QAAQ,CAAE,kBAAA2B,CAAC,QAAI1B,CAAAA,WAAW,CAAC0B,CAAC,CAACE,MAAF,CAASa,KAAV,CAAf,EAA5F,EAFJ,GAnCJ,cAuCiB,aAvCjB,cAyCI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,aAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,4BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,QAAQ,KAAlC,CAAmC,WAAW,CAAC,mBAA/C,CAAmE,KAAK,CAAEtC,WAA1E,CAAuF,QAAQ,CAAE,kBAAAuB,CAAC,QAAItB,CAAAA,cAAc,CAACsB,CAAC,CAACE,MAAF,CAASa,KAAV,CAAlB,EAAlG,EAFJ,GAzCJ,cA6CiB,aA7CjB,cAgDI,MAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAC,SAA9B,mCACY,UAAG,SAAS,CAAC,kBAAb,EADZ,GAhDJ,GANR,GAFJ,GADJ,CAmEH,CAzJD,CA2JA,cAAexD,CAAAA,iBAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { Form, Button } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport FormContainer from '../components/FormContainer'\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\nimport { listProductsDetails, updateProduct } from '../actions/productActions'\nimport { Link } from 'react-router-dom'\nimport { PRODUCT_UPDATE_RESET } from '../constants/productConstants'\n\n\nconst EditProductScreen = ({ match, history }) => {\n    const productId = match.params.id\n    const [name, setName] = useState('')\n    const [price, setPrice] = useState(0)\n    const [image, setImage] = useState('')\n    const [brand, setBrand] = useState('')\n    const [category, setCategory] = useState('')\n    const [countInStock, setCountInStock] = useState(0)\n    const [description, setDescription] = useState('')\n    const [rating, setRating] = useState('')\n    const [uploading, setUploading] = useState(false)\n    const [uploadError, setUploadError] = useState(false)\n\n\n\n    const dispatch = useDispatch()\n\n    const productDetails = useSelector(state => state.productDetails)\n    const { loading, error, product } = productDetails\n\n    const productUpdate = useSelector(state => state.productUpdate)\n    const { loading: loadingUpdate, error: errorUpdate, success: successUpdate } = productUpdate\n\n    useEffect(() => {\n        if (successUpdate) {\n            dispatch({\n                type: PRODUCT_UPDATE_RESET\n            })\n            history.push('/admin/productlist')\n        } else {\n            if (!product.name || product._id !== productId) {\n                dispatch(listProductsDetails(productId))\n            } else {\n                setName(product.name)\n                setPrice(product.price)\n                setImage(product.image)\n                setBrand(product.brand)\n                setCategory(product.category)\n                setCountInStock(product.countInStock)\n                setDescription(product.description)\n                setRating(product.rating)\n            }\n        }\n    }, [product, dispatch, productId, history, successUpdate])\n\n    const uploadFileHandler = async (e) => {\n        const file = e.target.files[0]\n        const formData = new FormData()\n        formData.append('image', file)\n        setUploading(true)\n        console.log(uploading);\n\n        try {\n            const config = {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }\n            }\n\n            const { data } = await axios.post('/api/upload', formData, config)\n\n            setImage(data)\n            console.log(uploading);\n            setUploading(false)\n            setUploadError(false)\n        } catch (error) {\n            setUploadError(true)\n            console.log(error);\n            setUploading(false)\n        }\n    }\n\n    const submitHandler = (e) => {\n        e.preventDefault()\n        dispatch(updateProduct({\n            _id: productId,\n            name,\n            price,\n            image,\n            brand,\n            category,\n            description,\n            countInStock,\n            rating\n        }))\n    }\n    return (\n        <>\n            <Link to='/admin/productlist' className='btn btn-outline-dark my-3'><i className=\"far fa-hand-point-left\"></i> Go Back</Link>\n            <FormContainer>\n                <h1>Edit Product</h1>\n                {successUpdate && <Message variant='success'>Product Updated successfuly<i className='fas fa-check'></i></Message>}\n                {loadingUpdate && <Loader />}\n                {errorUpdate && <Message variant='danger'>{errorUpdate} <i className=\"fas fa-exclamation-triangle\"></i> </Message>}\n                {loading ? <Loader /> : error ? <Message variant='danger'>{error} <i className=\"fas fa-exclamation-triangle\"></i></Message> : (\n                    <Form onSubmit={submitHandler}>\n\n                        <Form.Group controlId='name'>\n                            <Form.Label> Product Name</Form.Label>\n                            <Form.Control required type='name' placeholder='Enter your full name' value={name} onChange={e => setName(e.target.value)}>\n                            </Form.Control>\n                        </Form.Group><br />\n\n                        <Form.Group controlId='price'>\n                            <Form.Label> Price </Form.Label>\n                            <Form.Control required type='number' placeholder='Enter price' value={price} onChange={e => setPrice(e.target.value)}>\n                            </Form.Control>\n                        </Form.Group><br />\n\n                        <Form.Group controlId='image'>\n                            <Form.Label> Image </Form.Label>\n                            <Form.Control required type='text' placeholder='Enter image url' value={image} onChange={e => setImage(e.target.value)}>\n                            </Form.Control ><br />\n                            <Form.File id='image-file' label={uploading === false && <Message variant='info'><i className=\"fas fa-exclamation-circle\"></i> Only jpg/jpeg/png Files <i className=\"fas fa-exclamation-circle\"></i></Message>} custom onChange={uploadFileHandler}></Form.File>\n                            {uploading && <Loader />}\n                            {uploadError && <Message variant='danger'>Sorry <i className=\"far fa-sad-tear\"></i> , the file has to be a jpg/jpeg/png <i className=\"fas fa-bomb\"></i></Message>}\n                        </Form.Group><br />\n\n                        <Form.Group controlId='brand'>\n                            <Form.Label> Brand </Form.Label>\n                            <Form.Control required type='text' placeholder='Enter brand' value={brand} onChange={e => setBrand(e.target.value)}>\n                            </Form.Control>\n                        </Form.Group><br />\n\n                        <Form.Group controlId='countInStock'>\n                            <Form.Label> countInStock </Form.Label>\n                            <Form.Control required type='number' placeholder='Enter countInStock' value={countInStock} onChange={e => setCountInStock(e.target.value)}>\n                            </Form.Control>\n                        </Form.Group><br />\n\n                        <Form.Group controlId='category'>\n                            <Form.Label> Category </Form.Label>\n                            <Form.Control type='text' required placeholder='Enter category' value={category} onChange={e => setCategory(e.target.value)}>\n                            </Form.Control>\n                        </Form.Group><br />\n\n                        <Form.Group controlId='description'>\n                            <Form.Label> Description </Form.Label>\n                            <Form.Control type='text' required placeholder='Enter description' value={description} onChange={e => setDescription(e.target.value)}>\n                            </Form.Control>\n                        </Form.Group><br />\n\n\n                        <Button type='submit' variant='primary'>\n                            Update  <i className=\"fas fa-user-edit\"></i>\n                        </Button>\n                    </Form>\n                )}\n\n            </FormContainer>\n        </>\n\n    )\n}\n\nexport default EditProductScreen\n"]},"metadata":{},"sourceType":"module"}